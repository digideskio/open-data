<% 
  add_js_include('jquery.autoSuggest.packed')
  add_css_include('autoSuggest')
%>

<% content_for :domready do -%>
  $('#dataset_title').focus();
	var upload_manager = new UploadManager($('#pending_files'), <%= @dataset.attachments.count %>, <%= @max_files %>);
	upload_manager.addElement($('#new_attachment'), 'dataset');
	$("#dataset_tag_list").autoSuggest([
	  {value: "21", name: "Mick Jagger"},
    {value: "43", name: "Johnny Storm"},
    {value: "46", name: "Richard Hatch"},
    {value: "54", name: "Kelly Slater"},
    {value: "55", name: "Rudy Hamilton"},
    {value: "79", name: "Michael Jordan"}
	], {startText: '', selectedItemProp: "name", searchObjProps: "name", asHtmlID: "dataset_tag_list"});
<% end -%>

  <% form.inputs do -%>
    <%= form.input :title %>
    <%= form.input :description %>
    <%= form.input :start_date, :required => false, :hint => 'mm/dd/YYYY' %>
    <%= form.input :end_date, :required => false, :hint => 'mm/dd/YYYY' %>

    <%= form.label 'Data File(s) *' %>
    <div id="file_upload">
    	<p class="inline-hints">
    	  You can add up to <%= @max_files %> files of 20 MB each.<br />
    	  Allowed types: pdf, csv, txt, xml, rdf, kml, kmz.
    	</p>
      <input id="new_attachment" type="file" />
    	<ul id="pending_files">
    	  <% form.semantic_fields_for :attachments do |attachment| -%>
    	    <li id="attachment_<%= attachment.object.id %>">
    	      <%= link_to(attachment.object.attachment_file_name, attachment.object.attachment.url, :target => :_blank) %>
    	      <%= attachment.check_box :_destroy %><%= attachment.label :_destroy, :label => 'Remove' %>
    	    </li>
        <% end -%>
    	</ul>
    </div>
    <div class="clear"></div>

    <%= form.input :tag_list, :as => :string %>
    <%= form.input :is_featured, :required => false, :label => 'Featured on home page' %>
  <% end -%>
	
  <% form.buttons do -%>
    <%= form.commit_button %> or <%= link_to 'cancel', @dataset.new_record? ? datasets_path : dataset_path(@dataset) %>
  <% end -%>

